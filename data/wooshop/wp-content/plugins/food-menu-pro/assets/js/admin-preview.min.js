!function(){"use strict";!function(e){function t(){if(e("#fmsc_sc_settings_meta").length){var t=e("#fmsc_sc_settings_meta").find("input[name],select[name],textarea[name]").serialize();!function(t,a,r,d){var l;l="action="+a,r&&(l=r+"&action="+a),l.search(fmp.nonceID)<0&&(l=l+"&"+fmp.nonceID+"="+fmp.nonce),e.ajax({type:"post",url:fmp.ajaxurl,data:l,beforeSend:function(){e("#fmsc_sc_preview_meta").addClass("loading"),e(".fmp-response .spinner").addClass("is-active")},success:function(t){e("#fmsc_sc_preview_meta").removeClass("loading"),e(".fmp-response .spinner").removeClass("is-active"),function(t){t.error||e("#fmp-preview-container").html(t.data).promise().done((function(){e(".fmp-wrapper").each((function(){var t=e(this);if(e(this).attr("data-layout")){var a,r,d=t.find(".fmp-isotope"),l=t.find(".fmp-carousel"),p='<div class="fmp-loading-overlay"></div><div class="fmp-loading fmp-ball-clip-rotate"><div></div></div>',f=t.find(".fmp-pre-loader"),m=t.find(".fmp-content-loader"),c=function(){t.find(".fmp-content-loader").removeClass("element-loading"),m.find(".fmp-loading, .fmp-loading-overlay").fadeOut(100,(function(){var t=this;setTimeout((function(){e(t).remove()}),700)})),setTimeout((function(){m.removeClass("fmp-pre-loader")}),700)};if(l.length&&l.imagesLoaded((function(){!function(e){e(".rtfm-carousel-slider").each((function(){e(this).rtfm_slider()}))}(e),e(document).on("rtfm_slider_loaded",(function(){l.removeClass("slider-loading"),c()}))})),d.length){var u=t.find(".fmp-isotope-buttons"),h=d.find(".even-grid-item");r||(r=u.find("button.selected").data("filter"));var g=d.imagesLoaded((function(){d.parents(".fmp-row").removeClass("fmp-pre-loader"),g.isotope({itemSelector:".fmp-isotope-item",masonry:{columnWidth:".fmp-isotope-item"},resizable:!h.length,layoutMode:h.length?"fitRows":"masonry",filter:function(){var t=e(this),i=!a||t.text().match(a),n=!r||t.is(r);return i&&n}})})),v=t.find(".iso-search-input").keyup(s((function(){a=new RegExp(v.val(),"gi"),g.isotope()})));u.on("click touchstart","button",(function(t){t.preventDefault(),r=e(this).attr("data-filter"),g.isotope(),e(this).parent().find(".selected").removeClass("selected"),e(this).addClass("selected")})),t.find(".fmp-utility .fmp-load-more").length&&t.find(".fmp-load-more").on("click","button",(function(a){a.preventDefault(a),i(e(this),g,t,"isotope",u)})),t.find(".fmp-utility .fmp-scroll-load-more").length&&e(window).on("scroll",(function(){n(t.find(".fmp-utility .fmp-scroll-load-more"),g,t,"isotope",u)}))}else if(t.find(".fmp-row.fmp-masonry").length){var w=e(".fmp-row.fmp-masonry").imagesLoaded((function(){w.isotope({itemSelector:".masonry-grid-item",masonry:{columnWidth:".masonry-grid-item"}})}));t.find(".fmp-utility .fmp-load-more").length&&t.find(".fmp-load-more").on("click","button",(function(a){a.preventDefault(a),i(e(this),w,t,"mLayout")})),t.find(".fmp-utility .fmp-scroll-load-more").length&&e(window).on("scroll",(function(){var e=t.find(".fmp-utility .fmp-scroll-load-more");e.attr("data-trigger")>0&&n(e,w,t,"mLayout")})),t.find(".fmp-utility .fmp-pagination.fmp-ajax").length&&o(t,w)}else t.find(".fmp-utility .fmp-load-more").length&&t.find(".fmp-load-more").on("click","button",(function(a){a.preventDefault(a),i(e(this),w,t,"eLayout")})),t.find(".fmp-utility .fmp-scroll-load-more").length&&e(window).on("scroll",(function(){var e=t.find(".fmp-utility .fmp-scroll-load-more");e.attr("data-trigger")>0&&n(e,w,t,"eLayout")})),t.find(".fmp-utility .fmp-pagination.fmp-ajax").length&&o(t,w);0===f.find(".fmp-loading-overlay").length&&f.append(p),c(),t.find(".fmp-wc-quantity-wrap").length&&function(e){e(document).on("click",".fmp-wc-quantity-wrap .input-group-btn .quantity-btn",(function(){var t=e(this).closest(".fmp-wc-quantity-wrap").find(".fmp-input-text");e(this).hasClass("quantity-plus")&&t.trigger("stepUp").trigger("change"),e(this).hasClass("quantity-minus")&&t.trigger("stepDown").trigger("change")}))}(e)}}))}))}(t)}})}(0,"fmpPreviewAjaxCall",t=t+"&"+e.param({sc_id:e("#post_ID").val()||0}))}}function i(t,i,n,o,s){var d=t.text(),l=e("#fmsc_sc_settings_meta").find("input[name],select[name],textarea[name]").serialize(),p=parseInt(t.attr("data-paged"),10);return l=l+"&paged="+p+"&action=fmpLoadMorePreview&"+fmp.nonceID+"="+fmp.nonce,n.data("archive")&&(l=l+"&archive="+n.data("archive"),n.data("archive-value")&&(l=l+"&archive-value="+n.data("archive-value"))),e.ajax({type:"post",url:fmp.ajaxurl,data:l,beforeSend:function(){t.html('<span class="more-loading">Loading ...</span>')},success:function(e){e.error?(t.text(e.msg),t.attr("disabled","disabled"),t.parent().hide()):(t.attr("data-paged",p+1),"isotope"==o?a(n,i,e.data,s):"mLayout"==o?i.append(e.data).isotope("appended",e.data).isotope("updateSortData").isotope("reloadItems").isotope():n.children(".fmp-row").append(e.data),r(),t.text(d))}}),!1}function a(t,i,a,n){var o;o||(o=n.find("button.selected").data("filter")),i.append(a).isotope("appended",a).isotope("reloadItems").isotope("updateSortData").isotope(),r(),setTimeout((function(){r(),i.isotope()}),100),e(n).on("click","button",(function(t){t.preventDefault(),o=e(this).attr("data-filter"),i.isotope(),e(this).parent().find(".selected").removeClass("selected"),e(this).addClass("selected")}));var d=t.find(".iso-search-input").keyup(s((function(){new RegExp(d.val(),"gi"),i.isotope()})))}function n(t,i,n,o,s){var d=e(window).height();if(e(window).scrollTop()+d>=t.offset().top+t.outerHeight()-50&&1==t.attr("data-trigger")){t.attr("data-trigger",0);var l=e("#fmsc_sc_settings_meta").find("input[name],select[name],textarea[name]").serialize(),p=parseInt(t.attr("data-paged"),10);l=l+NaN+p+"&action=fmpLoadMorePreview&"+fmp.nonceID+"="+fmp.nonce,n.data("archive")&&(l=l+"&archive="+n.data("archive"),n.data("archive-value")&&(l=l+"&archive-value="+n.data("archive-value"))),e.ajax({type:"post",url:fmp.ajaxurl,data:l,beforeSend:function(){t.html('<span class="more-loading">Loading ...</span>')},success:function(e){e.error?(t.html(""),t.attr("data-trigger",0)):(t.attr("data-paged",p+1),"isotope"==o?a(n,i,e.data,s):"mLayout"==o?i.append(e.data).isotope("appended",e.data).isotope("updateSortData").isotope("reloadItems").isotope():n.children(".fmp-row").append(e.data),r(),t.html(""),t.attr("data-trigger",1))}})}}function o(t,i){e(".fmp-pagination.fmp-ajax ul li").on("click","a",(function(a){a.preventDefault();var n=e("#fmsc_sc_settings_meta").find("input[name],select[name],textarea[name]").serialize(),o=e(this),s=o.parents("li"),d=s.parents(".fmp-pagination.fmp-ajax"),l=d.find("li.active"),p=parseInt(l.text(),10),f="<a data-paged='"+p+"' href='#'>"+p+"</a>",m=o.data("paged");n=n+"&paged="+m+"&action=fmpLoadMorePreview&"+fmp.nonceID+"="+fmp.nonce,l.html(f),d.find("li").removeClass("active"),s.addClass("active"),s.html("<span>"+m+"</span>"),t.data("archive")&&(n=n+"&archive="+t.data("archive"),t.data("archive-value")&&(n=n+"&archive-value="+t.data("archive-value"))),e.ajax({type:"post",url:fmp.ajaxurl,data:n,beforeSend:function(){d.append('<div class="fmp-loading-holder"><span class="more-loading">Loading ...</span></div>')},success:function(a){a.error?alert(a.msg):(void 0===i?(t.children(".fmp-row").animate({opacity:0}),t.children(".fmp-row").html(a.data).show(),e.when(r()).done((function(){t.children(".fmp-row").animate({opacity:1})}))):(t.children(".fmp-row").find(".masonry-grid-item").remove(),e.when(i.append(a.data).isotope("appended",a.data).isotope("updateSortData").isotope("reloadItems").isotope()).done((function(){i.imagesLoaded((function(){e.when(r()).done((function(){i.isotope()}))}))}))),r()),e(".fmp-loading-holder").remove()}})}))}function r(){var t;t=e(window).width(),e(".fmp-wrapper").each((function(){var i=e(this),a=i.data("desktop-col"),n=i.data("tab-col"),o=i.data("mobile-col"),r=e(this).find(".fmp-row.fmp-even"),s=0;t>=1200&&a>1||t>=992&&n>1||t>=768&&o>1?e(document).imagesLoaded((function(){r.find(".even-grid-item").height("auto"),r.find(".even-grid-item").each((function(){var t=e(this).actual("outerHeight");t>s&&(s=t)})),r.find(".even-grid-item").css("height",s+"px")})):r.find(".even-grid-item").height("auto")}))}function s(e,t){var i;return function(){i&&clearTimeout(i),setTimeout((function(){e(),i=null}),t||100)}}e("#fmsc_sc_settings_meta").on("change","select,input",(function(){t()})),e("#fmsc_sc_settings_meta").on("input propertychange",(function(){t()})),e("span.rtAddImage").on("click",(function(i){var a,n=e(this).parents(".rt-image-holder");void 0===a?((a=wp.media.frames.file_frame=wp.media({title:"Select or Upload Media For your profile gallery",button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=a.state().get("selection").first().toJSON(),i=e.id,o=void 0===e.sizes.thumbnail?e.url:e.sizes.thumbnail.url;n.find(".hidden-image-id").val(i),n.find(".rtRemoveImage").show(),n.find("img").remove(),n.find(".rt-image-preview").append("<img src='"+o+"' />"),t()})),a.open()):a.open()})),e("span.rtRemoveImage").on("click",(function(i){if(i.preventDefault(),confirm("Are you sure?")){var a=e(this).parents(".rt-image-holder");a.find(".hidden-image-id").val(""),a.find(".rtRemoveImage").hide(),a.find("img").remove(),t()}})),e(document).ready((function(){t()}));var d=function(t){this.$slider=t,this.slider=this.$slider.get(0),this.swiperSlider=this.slider.swiper||null,this.defaultOptions={breakpointsInverse:!0,observer:!0,navigation:{nextEl:this.$slider.find(".swiper-button-next").get(0),prevEl:this.$slider.find(".swiper-button-prev").get(0)},pagination:{el:this.$slider.find(".swiper-pagination").get(0),type:"bullets",clickable:!0}},this.slider_enabled="function"==typeof Swiper,this.options=Object.assign({},this.defaultOptions,this.$slider.data("options")||{}),this.initSlider=function(){this.slider_enabled&&(this.options.rtl&&this.$slider.attr("dir","rtl"),this.swiperSlider?(this.swiperSlider.parents=this.options,this.swiperSlider.update()):this.swiperSlider=new Swiper(this.$slider.get(0),this.options))},this.imagesLoaded=function(){if(this.$slider.data("options").lazy)this.$slider.trigger("rtfm_slider_loaded",this);else{var t=this;if(!e.isFunction(e.fn.imagesLoaded)||e.fn.imagesLoaded.done)return this.$slider.trigger("rtfm_slider_loading",this),void this.$slider.trigger("rtfm_slider_loaded",this);this.$slider.imagesLoaded().progress((function(e,i){t.$slider.trigger("rtfm_slider_loading",[t])})).done((function(e){t.$slider.trigger("rtfm_slider_loaded",[t])}))}},this.start=function(){var e=this;this.$slider.on("rtfm_slider_loaded",this.init.bind(this)),setTimeout((function(){e.imagesLoaded()}),1)},this.init=function(){this.initSlider()},this.rtSwiper=function(){return new Swiper(this.$slider.get(0),this.options)},this.start()};e.fn.rtfm_slider=function(){return new d(this),this}}(jQuery)}();